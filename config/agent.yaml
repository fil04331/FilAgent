# Configuration FilAgent - PME Québec
version: 1.0.0

agent:
  name: "FilAgent-PME-Quebec"
  language: "fr-CA"
  mode: "production"
  
model:
  path: "sonar"
  backend: "perplexity"

generation:
  temperature: 0.7
  max_tokens: 2048
  top_p: 0.95
  seed: 42  # Reproductibilité
  top_k: 40
  repetition_penalty: 1.1

# HTN Planning - ACTIVÉ POUR DEBUG
# Investigating bug: HTN truncates Perplexity responses to exactly 283 chars
# Adding debug logs to identify truncation point
htn_planning:
  enabled: true  # TEMPORAIREMENT ACTIVÉ POUR DEBUGGING

memory:
  episodic:
    type: "sqlite"
    path: "memory/episodic/conversations.db"
    retention_days: 90
  semantic:
    backend: "faiss"  # Options: "faiss" or "chromadb"
    path: "memory/semantic/index"
    embedding_model: "all-MiniLM-L6-v2"  # Default: 384 dimensions
    # Alternative models:
    # - "paraphrase-multilingual-mpnet-base-v2" (768 dimensions, multilingual)
    # - "all-mpnet-base-v2" (768 dimensions, best quality)
    # - "all-MiniLM-L12-v2" (384 dimensions, fast)
    embedding_dim: 384  # Auto-detected if not specified
    chunk_size: 500  # Tokens per chunk for document ingestion
    chunk_overlap: 50  # Overlap between chunks
    top_k_retrieval: 3  # Number of chunks to retrieve for context
    
compliance:
  loi25:
    enabled: true
    pii_redaction: true
    decision_records: true
    audit_trail: true
  gdpr:
    enabled: true
    right_to_forget: true
  ai_act:
    enabled: true
    transparency: true

compliance_guardian:
  enabled: true
  rules_path: "config/compliance_rules.yaml"
    
tools:
  enabled:
    - calculator
    - file_reader
    - python_sandbox
    - quickbooks_connector
    - document_analyzer
    
security:
  sandbox:
    enabled: true
    timeout: 30
    max_memory: "512MB"
  encryption:
    type: "EdDSA"
    key_path: "provenance/keys/"
